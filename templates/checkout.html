{% extends 'root.html' %} {% load static %} {% block content %}

    <!-- Link Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <style>
    
    @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    body{
        font-family: "Poppins", sans-serif;
        background-color: #ffffff;
    }
    .list-group-item .d-flex{
        width: 50%;
    }
        /* .container {
            background-color: #fff;
            color: black;
            padding: 20px;
            border-radius: 8px;
            box-shadow: rgba(0, 0, 0, 0.19) 0px 10px 20px, rgba(0, 0, 0, 0.23) 0px 6px 6px;
        } */

        .order-info {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .vector_image{
            width: 100%;
            display: flex;
        justify-content:space-between;
        }
#succes-icon_ofUndraw{
    width: 20%;
    padding: 3%;
}
.bg-success , .btn-success {
        background-color: #9FC088 !important;
        border: none;
    }
        /* Additional styling for form and button alignment */
        form {
            margin-bottom: 20px;
        }

        /* Responsive margin for Pay Now button */
        @media (max-width: 576px) {
            .btn-primary {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    

    <div class="container mt-4">
        
        <div class="vector_image">
            <h4 class="mb-4 ">Checkout / Order Summary </h4>

            <img id="succes-icon_ofUndraw" src="{% static 'images/undraw_confirmation_re_b6q5.svg' %}">
        </div>
        
        <div class="card mb-4 mt-5">
            <div class="card-header bg-success text-white">
                Order #{{ order.id }} - Status: {{ order.status }}
            </div>
            <div class="card-body">
                <ul class="list-group">
                    {% for item in order.orderitem_set.all %}
                    <li class="list-group-item">
                        <div class="d-flex justify-content-between align-items-center">
                            <span>
                                Product: {{ item.product_variant.name }}
                                <br>
                                Quantity: {{ item.quantity }}
                                <br>
                                Price: ₹ {{ item.product_variant.price }}
                            </span>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="order-info">
            <p><b class="text-warning">Shipping Address: {{ customer.shipping_address }}</b></p>
       </div>
        <div class="order-info">
             <p><b class="text-success">Total Price: ₹ {{ total_price }}</b></p>
        </div>

        <button class="btn btn-success" type="submit" onclick="openCheckout()">Pay Now</button>
    </div>
    
    <!-- Link Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        var options = {
            key: '{{ settings.RAZORPAY_API_KEY }}',
            amount: '{{ total_price }}',
            currency: 'INR',
            name: 'Deal Bazar',
            description: 'Payment for your product or service',
            // image: 'your_logo_url',
            order_id: '{{ razor_pay_order.id }}',
            handler: function (response) {
                window.location.href = `http://13.233.101.242:8055/order_success/?razorpay_payment_id=${response.razorpay_payment_id}&razorpay_order_id=${response.razorpay_order_id}&razorpay_signature=${response.razorpay_signature}`;
            }
        };

        function openCheckout() {
            var rzp = new Razorpay(options);
            rzp.open();
        }
    </script>

{% endblock content%}

